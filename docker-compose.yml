version: "3"

services:
        web:
                # replace username/repo:tag with your name and image details
                image: jnewton1452/docker-tutorial:part3
                deploy:
                        replicas: 8
                        resources:
                                limits:
                                        cpus: "0.1"
                                        memory: 50M
                        restart_policy:
                                condition: on-failure
                ports:
                        - "4000:80"
                networks:
                        - webnet

        redis:
                container_name: "redis"
                image: redis:alpine
                command: redis-server /usr/local/etc/redis/redis.conf
                ports:
                  - "6379:6379"

                volumes:
                - $PWD/redis.conf:/usr/local/etc/redis/redis.conf

                networks:
                        -webnet
networks:
        webnet:

  
      